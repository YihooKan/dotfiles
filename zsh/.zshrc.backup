# 1. [å¿…é¡»ç½®é¡¶] Powerlevel10k å³æ—¶æç¤º
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# 2. è·¯å¾„è®¾ç½®
export ZSH="$HOME/.oh-my-zsh"

# 3. ä¸»é¢˜è®¾ç½®
ZSH_THEME="powerlevel10k/powerlevel10k"

# 4. å¸¸ç”¨è®¾ç½®
COMPLETION_WAITING_DOTS="true" # ç­‰å¾…è¡¥å…¨æ—¶æ˜¾ç¤ºçº¢ç‚¹
DISABLE_UNTRACKED_FILES_DIRTY="true" # åœ¨å¤§å‹ git é¡¹ç›®ä¸­åŠ é€Ÿæ˜¾ç¤º

# 5. æ’ä»¶åˆ—è¡¨ (æ³¨æ„ï¼šä¸­é—´åªæœ‰ç©ºæ ¼ï¼Œæ²¡æœ‰é€—å·)
plugins=(
  git 
  zsh-autosuggestions 
  zsh-syntax-highlighting 
  vi-mode 
  extract 
  sudo
)

# åŠ è½½ Oh My Zsh
source $ZSH/oh-my-zsh.sh

# 6. ä¸ªäººå¿«æ·åˆ«å (Aliases)
alias zshconfig="nvim ~/.zshrc"
alias vimconfig="nvim ~/.config/nvim/init.lua"
alias cls="clear"
alias ..="cd .."
alias ...="cd ../.."
alias gomonorepo="cd ~/repos/monorepo"
alias gorepo="cd ~/repos"
alias vim="nvim"
alias gtree="git log --oneline"
alias showstash="git stash list"

# 7. åŠ è½½ P10k æ ·å¼é…ç½®
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# Functions
# ä¸€é”®æ¸…ç†è¿œç¨‹ä¸Šåˆ é™¤ä½†æ˜¯è¿˜æ®‹ç•™åœ¨æœ¬åœ°çš„åˆ†æ”¯
# function gcp() {
#   # æ£€æŸ¥æ˜¯å¦åœ¨ Git ç›®å½•
#   if ! git rev-parse --is-inside-work-tree > /dev/null 2>&1; then
#     echo "âŒ é”™è¯¯ï¼šå½“å‰ç›®å½•ä¸æ˜¯ Git ä»“åº“"
#     return 1
#   fi
#
#   echo "ğŸš€ æ­£åœ¨åŒæ­¥è¿œç¨‹çŠ¶æ€ (fetch -p)..."
#   git fetch -p
#
#   # è·å–å·²ç»å¤±æ•ˆçš„åˆ†æ”¯åˆ—è¡¨
#   # æ’é™¤æ‰å½“å‰æ­£åœ¨ä½¿ç”¨çš„åˆ†æ”¯ï¼ˆå¸¦ * å·çš„ï¼‰
#   local gone_branches=$(git branch -vv | grep ': gone]' | grep -v '^*' | awk '{print $1}')
#
#   if [ -n "$gone_branches" ]; then
#     echo "ğŸ§¹ å‘ç°ä»¥ä¸‹è¿‡æ—¶åˆ†æ”¯ï¼š"
#     echo "$gone_branches"
#     echo "--------------------------"
#     # ä½¿ç”¨ xargs æ‰§è¡Œåˆ é™¤
#     echo "$gone_branches" | xargs git branch -d
#   else
#     echo "âœ¨ ä½ çš„æœ¬åœ°ä»“åº“éå¸¸å¹²å‡€ï¼Œæ²¡æœ‰éœ€è¦æ¸…ç†çš„åˆ†æ”¯ã€‚"
#   fi
#